<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Addressable Entity in Casper 2.0 | Casper Docs - Redux</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://casper-devrel.github.io/blog/addressable-entity/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Addressable Entity in Casper 2.0 | Casper Docs - Redux"><meta data-rh="true" name="description" content="An introduction to the Addressable Entity concept."><meta data-rh="true" property="og:description" content="An introduction to the Addressable Entity concept."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-07-17T18:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/sczembor,https://github.com/melpadden"><meta data-rh="true" property="article:tag" content="Condor"><link data-rh="true" rel="icon" href="/icon/favicon.ico"><link data-rh="true" rel="canonical" href="https://casper-devrel.github.io/blog/addressable-entity/"><link data-rh="true" rel="alternate" href="https://casper-devrel.github.io/blog/addressable-entity/" hreflang="en"><link data-rh="true" rel="alternate" href="https://casper-devrel.github.io/blog/addressable-entity/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://A1AAQ71KTN-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://casper-devrel.github.io/blog/addressable-entity","mainEntityOfPage":"https://casper-devrel.github.io/blog/addressable-entity","url":"https://casper-devrel.github.io/blog/addressable-entity","headline":"Addressable Entity in Casper 2.0","name":"Addressable Entity in Casper 2.0","description":"An introduction to the Addressable Entity concept.","datePublished":"2024-07-17T18:00:00.000Z","author":[{"@type":"Person","name":"Stanislaw Czembor","description":"Developer Advocate for Casper Association","url":"https://github.com/sczembor","image":"https://github.com/sczembor.png"},{"@type":"Person","name":"Mel Padden","description":"Head of Developer Relations for Casper Association","url":"https://github.com/melpadden","image":"https://github.com/melpadden.png"}],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://casper-devrel.github.io/blog","name":"Casper Developer Relations Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Casper Docs - Redux RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Casper Docs - Redux Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Casper Docs - Redux" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.73c81181.css">
<script src="/assets/js/runtime~main.d0ca807f.js" defer="defer"></script>
<script src="/assets/js/main.8959bba6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f9f9f9;color:#000000" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">This is an Alpha version of the Casper Docs Redux. 
 Any suggestions please email to <a href="mailto:devrel@casper.network">devrel@casper.network</a>, or 
 submit an issue on <a href="https://github.com/casper-devrel/docs-redux/issues/new?assignees=&labels=docs-v2-feedback&projects=&template=feedback.yml&title=Docs+Feedback">Github<a></a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/icon/Casper_Wordmark_Red_RGB.png" alt="Casper Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/icon/Casper_Wordmark_Red_RGB.png" alt="Casper Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/concepts/">Concepts</a><a class="navbar__item navbar__link" href="/developers/">Developers</a><a class="navbar__item navbar__link" href="/operators/">Operators</a><a class="navbar__item navbar__link" href="/users/">Users</a><a class="navbar__item navbar__link" href="/resources/">Resources</a><a class="navbar__item navbar__link" href="/resources/quick-start/">Tutorials</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/casper-devrel/docs-redux/issues/new?assignees=&amp;labels=docs-v2-feedback&amp;projects=&amp;template=feedback.yml&amp;title=Docs+Feedback" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Feedback</a><a class="navbar__item navbar__link" href="/blog/tags/condor/">Condor</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/">1.5.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/">1.5.X</a></li></ul></div><a href="https://support.casperlabs.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.com/invite/casperblockchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/casper-devrel/docs-redux" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/condor-validator-rewards/">validator rewards in Casper 2.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/welcome-docs-redux/">Casper Docs Redux!</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/addressable-entity/">Addressable Entity in Casper 2.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/condor-fee-elimination/">Fee Elimination in Condor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/condor-local-setup/">Setting Up a Local Casper Condor Network for Development</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Addressable Entity in Casper 2.0</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-07-17T18:00:00.000Z">July 17, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/sczembor/"><img class="avatar__photo authorImage_XqGP" src="https://github.com/sczembor.png" alt="Stanislaw Czembor"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/sczembor/"><span class="authorName_yefp">Stanislaw Czembor</span></a></div><small class="authorTitle_nd0D" title="Developer Advocate for Casper Association">Developer Advocate for Casper Association</small><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/melpadden/"><img class="avatar__photo authorImage_XqGP" src="https://github.com/melpadden.png" alt="Mel Padden"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/melpadden/"><span class="authorName_yefp">Mel Padden</span></a></div><small class="authorTitle_nd0D" title="Head of Developer Relations for Casper Association">Head of Developer Relations for Casper Association</small><div class="authorSocials_rSDt"><a href="https://x.com/mel_casper" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="X"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style="--dark:#000;--light:#fff"><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>Casper 2.0 introduces significant changes in the representation and management of accounts and smart contracts, through the introduction of the <code>AddressableEntity</code> type. This new structure replaces the separate <code>AccountHash</code> and <code>ContractHash</code> used in Casper 1.x, bringing a unified approach to interact with entities on the network. Contracts can now hold and manage funds directly through associated purses, similar to user accounts. They can also manage their own keys, enabling more sophisticated access control.</p>
<p>In this article, we&#x27;ll dive into the details of <code>AddressableEntity</code>, exploring its structure and functionalities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-concepts">Key Concepts<a href="#key-concepts" class="hash-link" aria-label="Direct link to Key Concepts" title="Direct link to Key Concepts">​</a></h2>
<p><strong>AddressableEntity</strong></p>
<p>At its core, an <code>AddressableEntity</code> is a versatile data structure that represents both accounts and smart contracts within the Casper global state. It encapsulates all the necessary information for identifying and managing these entities. An <code>AddressableEntity</code> provides a unified interface for various operations, including authorization, access control, and execution of functions.</p>
<p><strong>EntityAddr</strong></p>
<p>An <code>EntityAddr</code> serves as the address for an <code>AddressableEntity</code>. It not only encodes the unique identifier (hash) of the entity but also its type. There are three distinct variants of <code>EntityAddr</code>:</p>
<ol>
<li><strong>System:</strong> Used for built-in, native contracts crucial for the blockchain&#x27;s operation.</li>
<li><strong>Account:</strong>  Represents a user&#x27;s account.</li>
<li><strong>SmartContract:</strong> Represents a user-deployed smart contract.</li>
</ol>
<p><strong>AddressableEntityHash</strong></p>
<p>The <code>AddressableEntityHash</code> is a newtype wrapper around a 32-byte hash (<code>HashAddr</code>). This hash functions as a unique identifier for the <code>AddressableEntity</code>, typically derived from either the account&#x27;s public key or the smart contract&#x27;s hash using hashing algorithm.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-inner-workings-of-addressableentity">The inner workings of AddressableEntity<a href="#the-inner-workings-of-addressableentity" class="hash-link" aria-label="Direct link to The inner workings of AddressableEntity" title="Direct link to The inner workings of AddressableEntity">​</a></h2>
<p>Let&#x27;s dive into the critical components within an <code>AddressableEntity</code>:</p>
<ul>
<li><strong><code>protocol_version</code> (ProtocolVersion):</strong>  This field indicates the protocol version that the entity is compatible with. It ensures backward compatibility and allows for smooth upgrades as the Casper network evolves.</li>
<li><strong><code>entity_kind</code> (EntityKind):</strong> As mentioned earlier, this enum determines the type of entity – System, Account, or SmartContract.</li>
<li><strong><code>associated_keys</code> (AssociatedKeys):</strong> This data structure stores a map of public keys authorized to interact with the entity. Each key is associated with a weight that represents its voting power in decision-making processes within the entity.</li>
<li><strong><code>action_thresholds</code> (ActionThresholds):</strong> These thresholds define the minimum combined weight of associated keys required to authorize specific actions. The three main action types are <code>deployment</code>, <code>key_management</code>, and <code>upgrade_management</code>. Each action type has its own weight threshold, allowing for fine-grained control over permissions.</li>
<li><strong><code>entry_points</code> (EntryPoints):</strong> This component is relevant only for smart contracts. It defines the functions (entry points) that external actors can call on the contract, along with their parameters, return types, and access permissions.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obtaining-and-converting-keys">Obtaining and converting Keys<a href="#obtaining-and-converting-keys" class="hash-link" aria-label="Direct link to Obtaining and converting Keys" title="Direct link to Obtaining and converting Keys">​</a></h2>
<p>In Casper 2.0, developers will primarily work with <code>Key::AddressableEntity</code> when referring to accounts and smart contracts. Here&#x27;s how you can create them and convert between different key formats:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-addressableentity-keys">Creating AddressableEntity Keys<a href="#creating-addressableentity-keys" class="hash-link" aria-label="Direct link to Creating AddressableEntity Keys" title="Direct link to Creating AddressableEntity Keys">​</a></h3>
<p><strong>From Account Hash:</strong></p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> addressable_entity_key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">AddressableEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EntityAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Account</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">account_hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>From Smart Contract Hash:</strong></p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> addressable_entity_key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">AddressableEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EntityAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">SmartContract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">contract_hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extracting-accounthash-or-contracthash-from-a-key">Extracting AccountHash or ContractHash from a Key<a href="#extracting-accounthash-or-contracthash-from-a-key" class="hash-link" aria-label="Direct link to Extracting AccountHash or ContractHash from a Key" title="Direct link to Extracting AccountHash or ContractHash from a Key">​</a></h3>
<p>You can extract the <code>AccountHash</code> or <code>ContractHash</code> from a <code>Key::AddressableEntity</code> using pattern matching:</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//For Accounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> account_hash </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">match</span><span class="token plain"> addressable_entity_key </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token class-name">Key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">AddressableEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EntityAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Account</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    _ </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token macro property">panic!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Not an account key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//For Contracts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> contract_hash </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">match</span><span class="token plain"> addressable_entity_key </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token class-name">Key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">AddressableEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EntityAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">SmartContract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    _ </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token macro property">panic!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Not a contract key&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-address-merge-in-condor">The Address Merge in Condor<a href="#the-address-merge-in-condor" class="hash-link" aria-label="Direct link to The Address Merge in Condor" title="Direct link to The Address Merge in Condor">​</a></h2>
<p>The &quot;Address Merge&quot; in the Condor upgrade of Casper is a foundational shift, impacting how accounts and smart contracts are identified and interacted with.</p>
<p><strong>Global State Transformation:</strong></p>
<p>Post-Condor, all accounts and smart contract addresses residing within the global state will be automatically migrated to the <code>AddressableEntity</code> structure. This means the network itself will recognize and handle these entities using the new format.</p>
<p><strong>Smart Contract Compatibility Considerations:</strong></p>
<p>While the global state automatically transitions to <code>AddressableEntity</code>, existing contracts are expected to function without any modification.</p>
<ul>
<li>
<p><strong>Caller Identification:</strong>
Existing host functions used to identify the caller within your contract will continue to work as before, ensuring no disruption to your contract&#x27;s functionality. However, new host functions have been introduced that are specifically designed to work with the AddressableEntity format.</p>
</li>
<li>
<p><strong>External Contract Interaction:</strong> Other contracts may have updated their interfaces to accept AddressableEntity arguments. Its worth to verify the argument types to avoid potential errors.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>Upgrading a contract to a newer version may involve complexities, such as changes to the contract&#x27;s addressable hash. These changes might require coordination with centralized and decentralized exchanges, as well as communication with your community to ensure a smooth transition.</li>
</ul>
</blockquote></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Blog posts related to the Condor upgrade" class="tag_zVej tagRegular_sFm0" href="/blog/tags/condor/">Condor</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/welcome-docs-redux/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Casper Docs Redux!</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/condor-fee-elimination/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Fee Elimination in Condor</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-concepts" class="table-of-contents__link toc-highlight">Key Concepts</a></li><li><a href="#the-inner-workings-of-addressableentity" class="table-of-contents__link toc-highlight">The inner workings of AddressableEntity</a></li><li><a href="#obtaining-and-converting-keys" class="table-of-contents__link toc-highlight">Obtaining and converting Keys</a><ul><li><a href="#creating-addressableentity-keys" class="table-of-contents__link toc-highlight">Creating AddressableEntity Keys</a></li><li><a href="#extracting-accounthash-or-contracthash-from-a-key" class="table-of-contents__link toc-highlight">Extracting AccountHash or ContractHash from a Key</a></li></ul></li><li><a href="#the-address-merge-in-condor" class="table-of-contents__link toc-highlight">The Address Merge in Condor</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://casper.network/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/icon/Casper_Wordmark_Horizontal_Red_RGB.png" alt="Casper Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="120" height="30"><img src="/icon/Casper_Wordmark_Horizontal_White_RGB.png" alt="Casper Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="120" height="30"></a></div><div class="footer__copyright">Copyright © 2024 Casper Association. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>